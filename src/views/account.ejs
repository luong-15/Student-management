<% if (typeof message !== 'undefined' && message) { %>
    <div class="alert <%= message.type || 'info' %>">
        <%= message.text %>
    </div>
<% } %>
<% if (typeof error !== 'undefined' || typeof success !== 'undefined') { %>
    <div id="notification" class="notification <%= typeof error !== 'undefined' ? 'error' : 'success' %>">
        <p><%= error || success %></p>
        <button type="button" onclick="closeNotification()" class="close-btn" aria-label="Close">&times;</button>
    </div>
<% } %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <title>Account</title>
</head>
<body>
    <h2>Student Management System</h2>

    <div class="container" id="container">
        <div class="form-container sign-up-container">
            <form action="/auth/register" method="POST" novalidate>
                <h1>Create Account</h1>
                <div class="social-container">
                    <a href="/auth/facebook" class="social" role="button" aria-label="Sign up with Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="/auth/google" class="social" role="button" aria-label="Sign up with Google">
                        <i class="fab fa-google-plus-g"></i>
                    </a>
                    <a href="/auth/linkedin" class="social" role="button" aria-label="Sign up with LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                </div>
                <span>or use your email for registration</span>
                <input type="text" 
                       name="username" 
                       placeholder="Username" 
                       required 
                       minlength="3" 
                       maxlength="50" 
                       pattern="[A-Za-z0-9_]+" />
                <input type="email" 
                       name="email" 
                       placeholder="Email" 
                       required />
                <input type="password" 
                       name="password" 
                       placeholder="Password" 
                       required 
                       minlength="8" />
                <div class="select-container">
                    <select name="role" required>
                        <option value="" disabled selected>Select role</option>
                        <option value="student">Student</option>
                        <option value="instructor">Instructor</option>
                    </select>
                </div>
                <button type="submit">Sign Up</button>
            </form>
        </div>
        
        <div class="form-container sign-in-container">
            <form action="/auth/login" method="POST" novalidate>
                <h1>Sign in</h1>
                <div class="social-container">
                    <a href="/auth/facebook" class="social" role="button" aria-label="Sign in with Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="/auth/google" class="social" role="button" aria-label="Sign in with Google">
                        <i class="fab fa-google-plus-g"></i>
                    </a>
                    <a href="/auth/linkedin" class="social" role="button" aria-label="Sign in with LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                </div>
                <span>or use your account</span>
                <div class="form-group">
                    <input type="email" 
                           name="email" 
                           placeholder="Email" 
                           required 
                           pattern="^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                           oninvalid="this.setCustomValidity('Please enter a valid email address (e.g., user@example.com)')"
                           oninput="this.setCustomValidity('')"
                           title="Please enter a valid email address (e.g., user@example.com)" />
                    <small class="error-message"></small>
                </div>
                <input type="password" name="password" placeholder="Password" required 
                       minlength="8" />
                <a href="/auth/forgot-password">Forgot your password?</a>
                <button type="submit">Sign In</button>
            </form>
        </div>

        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h1>Welcome Back!</h1>
                    <p>To keep connected with us please login with your personal info</p>
                    <button class="ghost" id="signIn" type="button">Sign In</button>
                </div>
                <div class="overlay-panel overlay-right">
                    <h1>Hello, Friend!</h1>
                    <p>Enter your personal details and start journey with us</p>
                    <button class="ghost" id="signUp" type="button">Sign Up</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/style.js"></script>
    <script src="/js/notifications.js"></script>
</body>
</html>